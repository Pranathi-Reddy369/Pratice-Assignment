<div class="container">
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Email</th>
          <th>Age</th>
          <th>Gender</th>
          <th>DOB</th>
          <th>Phone</th>
          <th>Address</th>
          <th>Country</th>
          <th>User name</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of response">
          <td>{{ item.firstname }}</td>
          <td>{{ item.lastname }}</td>
          <td>{{ item.email }}</td>
          <td>{{ item.age }}</td>
          <td>{{ item.gender }}</td>
          <td>{{ item.dob }}</td>
          <td>{{ item.phone }}</td>
          <td>{{ item.address }}</td>
          <td>{{ item.country }}</td>
          <td>{{ item.username }}</td>
          <td>
            <button (click)="edit(item)">Edit</button>
            <button (click)="delete(item)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <form #studentForm="ngForm" (ngSubmit)="add(studentForm)" class="form-container">
    <div class="form-field">
      <label for="name">First Name:</label>
      <input [(ngModel)]="detailsForm.firstname" name="firstname" type="text" id="name" required />
      <p style="color:red" *ngIf="studentForm.controls['firstname']?.invalid && studentForm.controls['firstname']?.touched">
        First name is required.
      </p>
    </div>

    <div class="form-field">
      <label for="lname">Last Name:</label>
      <input [(ngModel)]="detailsForm.lastname" name="lastname" type="text" id="lname" required />
      <p style="color:red" *ngIf="studentForm.controls['lastname']?.invalid && studentForm.controls['lastname']?.touched">
        Last name is required.
      </p>
    </div>

    <div class="form-field">
      <label for="email">Email:</label>
      <input [(ngModel)]="detailsForm.email" name="email" type="email" id="email" required email />
      <p style="color:red" *ngIf="studentForm.controls['email']?.invalid && studentForm.controls['email']?.touched">
        Valid email is required.
      </p>
    </div>

    <div class="form-field">
      <label for="age">Age:</label>
      <input [(ngModel)]="detailsForm.age" name="age" type="number" id="age" required min="1" max="120" />
      <p style="color:red" *ngIf="studentForm.controls['age']?.invalid && studentForm.controls['age']?.touched">
        Age must be between 1 and 120.
      </p>
    </div>

    <div class="form-field">
      <label>Gender:</label>
      <div class="radio-group">
        <input type="radio" id="fgender" name="gender" [(ngModel)]="detailsForm.gender" value="female" required />
        <label for="fgender">Female</label>
        <input type="radio" id="mgender" name="gender" [(ngModel)]="detailsForm.gender" value="male" />
        <label for="mgender">Male</label>
      </div>
      <p style="color:red" *ngIf="studentForm.controls['gender']?.invalid && studentForm.controls['gender']?.touched">
        Gender is required.
      </p>
    </div>

    <div class="form-field">
      <label for="dob">DOB:</label>
      <input [(ngModel)]="detailsForm.dob" name="dob" type="date" id="dob" required />
      <p style="color:red" *ngIf="studentForm.controls['dob']?.invalid && studentForm.controls['dob']?.touched">
        Date of birth is required.
      </p>
    </div>

    <div class="form-field">
      <label for="phn">Phone:</label>
      <input [(ngModel)]="detailsForm.phone" name="phone" type="text" id="phn" required pattern="^[0-9]{10}$" />
      <p style="color:red" *ngIf="studentForm.controls['phone']?.invalid && studentForm.controls['phone']?.touched">
        Phone must be 10 digits.
      </p>
    </div>

    <div class="form-field">
      <label for="ad">Address:</label>
      <textarea [(ngModel)]="detailsForm.address" name="address" id="ad" required minlength="10"></textarea>
      <p style="color:red" *ngIf="studentForm.controls['address']?.invalid && studentForm.controls['address']?.touched">
        Address is required (min 10 characters).
      </p>
    </div>

    <div class="form-field">
      <label for="c">Country:</label>
      <select [(ngModel)]="detailsForm.country" name="country" id="c" required>
        <option value="" disabled selected>Select country</option>
        <option value="india">India</option>
        <option value="pakistan">Pakistan</option>
      </select>
      <p style="color:red" *ngIf="studentForm.controls['country']?.invalid && studentForm.controls['country']?.touched">
        Country is required.
      </p>
    </div>

    <div class="form-field">
      <label for="un">User Name:</label>
      <input [(ngModel)]="detailsForm.username" name="username" type="text" id="un" required minlength="5" />
      <p style="color:red" *ngIf="studentForm.controls['username']?.invalid && studentForm.controls['username']?.touched">
        Username must be at least 5 characters.
      </p>
    </div>

    <div class="form-field">
      <label for="p">Password:</label>
      <input [(ngModel)]="detailsForm.password" name="password" type="password" id="p" required minlength="6" />
      <p style="color:red" *ngIf="studentForm.controls['password']?.invalid && studentForm.controls['password']?.touched">
        Password must be at least 6 characters.
      </p>
    </div>

    <div class="button-group">
      <button type="submit" [disabled]="studentForm.invalid">
        {{ detailsForm.id ? 'Update' : 'Submit' }}
      </button>
    </div>
  </form>
</div>
